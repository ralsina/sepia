<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Crystal Docs 1.17.1">
<meta name="crystal_docs.project_version" content="main">
<meta name="crystal_docs.project_name" content="Sepia">



<link href="../css/style.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="../js/doc.js"></script>

  <meta name="repository-name" content="Sepia">
  <title>Sepia::PathResolver - Sepia main</title>
  <script type="text/javascript">
    CrystalDocs.base_path = "../";
  </script>
</head>
<body>

<svg class="hidden">
  <symbol id="octicon-link" viewBox="0 0 16 16">
    <path fill="currentColor" fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
  </symbol>
</svg>
<input type="checkbox" id="sidebar-btn">
<label for="sidebar-btn" id="sidebar-btn-label">
  <svg class="open" xmlns="http://www.w3.org/2000/svg" height="2em" width="2em" viewBox="0 0 512 512"><title>Open Sidebar</title><path fill="currentColor" d="M80 96v64h352V96H80zm0 112v64h352v-64H80zm0 112v64h352v-64H80z"></path></svg>
  <svg class="close" xmlns="http://www.w3.org/2000/svg" width="2em" height="2em" viewBox="0 0 512 512"><title>Close Sidebar</title><path fill="currentColor" d="m118.6 73.4-45.2 45.2L210.7 256 73.4 393.4l45.2 45.2L256 301.3l137.4 137.3 45.2-45.2L301.3 256l137.3-137.4-45.2-45.2L256 210.7Z"></path></svg>
</label>
<div class="sidebar">
  <div class="sidebar-header">
    <div class="search-box">
      <input type="search" class="search-input" placeholder="Search..." spellcheck="false" aria-label="Search">
    </div>

    <div class="project-summary">
      <h1 class="project-name">
        <a href="../index.html">
          Sepia
        </a>
      </h1>

      <span class="project-version">
        main
      </span>
    </div>
  </div>

  <div class="search-results hidden">
    <ul class="search-list"></ul>
  </div>

  <div class="types-list">
    <ul>
  
  <li class="parent open current" data-id="Sepia/Sepia" data-name="sepia">
      <a href="../Sepia.html">Sepia</a>
      
        <ul>
  
  <li class=" " data-id="Sepia/Sepia/BackendNotSupportedError" data-name="sepia::backendnotsupportederror">
      <a href="../Sepia/BackendNotSupportedError.html">BackendNotSupportedError</a>
      
    </li>
  
  <li class="parent " data-id="Sepia/Sepia/Backup" data-name="sepia::backup">
      <a href="../Sepia/Backup.html">Backup</a>
      
        <ul>
  
  <li class=" " data-id="Sepia/Sepia/Backup/BackupFile" data-name="sepia::backup::backupfile">
      <a href="../Sepia/Backup/BackupFile.html">BackupFile</a>
      
    </li>
  
  <li class=" " data-id="Sepia/Sepia/Backup/BackupManifest" data-name="sepia::backup::backupmanifest">
      <a href="../Sepia/Backup/BackupManifest.html">BackupManifest</a>
      
    </li>
  
  <li class=" " data-id="Sepia/Sepia/Backup/BackupStatistics" data-name="sepia::backup::backupstatistics">
      <a href="../Sepia/Backup/BackupStatistics.html">BackupStatistics</a>
      
    </li>
  
  <li class=" " data-id="Sepia/Sepia/Backup/BackupVerificationResult" data-name="sepia::backup::backupverificationresult">
      <a href="../Sepia/Backup/BackupVerificationResult.html">BackupVerificationResult</a>
      
    </li>
  
  <li class=" " data-id="Sepia/Sepia/Backup/Configuration" data-name="sepia::backup::configuration">
      <a href="../Sepia/Backup/Configuration.html">Configuration</a>
      
    </li>
  
  <li class=" " data-id="Sepia/Sepia/Backup/ObjectReference" data-name="sepia::backup::objectreference">
      <a href="../Sepia/Backup/ObjectReference.html">ObjectReference</a>
      
    </li>
  
  <li class=" " data-id="Sepia/Sepia/Backup/ObjectType" data-name="sepia::backup::objecttype">
      <a href="../Sepia/Backup/ObjectType.html">ObjectType</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class=" " data-id="Sepia/Sepia/BackupCorruptionError" data-name="sepia::backupcorruptionerror">
      <a href="../Sepia/BackupCorruptionError.html">BackupCorruptionError</a>
      
    </li>
  
  <li class=" " data-id="Sepia/Sepia/BackupCreationError" data-name="sepia::backupcreationerror">
      <a href="../Sepia/BackupCreationError.html">BackupCreationError</a>
      
    </li>
  
  <li class=" " data-id="Sepia/Sepia/BackupError" data-name="sepia::backuperror">
      <a href="../Sepia/BackupError.html">BackupError</a>
      
    </li>
  
  <li class="parent " data-id="Sepia/Sepia/CacheManager" data-name="sepia::cachemanager">
      <a href="../Sepia/CacheManager.html">CacheManager</a>
      
        <ul>
  
  <li class=" " data-id="Sepia/Sepia/CacheManager/Stats" data-name="sepia::cachemanager::stats">
      <a href="../Sepia/CacheManager/Stats.html">Stats</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class=" " data-id="Sepia/Sepia/Container" data-name="sepia::container">
      <a href="../Sepia/Container.html">Container</a>
      
    </li>
  
  <li class=" " data-id="Sepia/Sepia/Event" data-name="sepia::event">
      <a href="../Sepia/Event.html">Event</a>
      
    </li>
  
  <li class=" " data-id="Sepia/Sepia/EventLogger" data-name="sepia::eventlogger">
      <a href="../Sepia/EventLogger.html">EventLogger</a>
      
    </li>
  
  <li class=" " data-id="Sepia/Sepia/EventLoggerBackend" data-name="sepia::eventloggerbackend">
      <a href="../Sepia/EventLoggerBackend.html">EventLoggerBackend</a>
      
    </li>
  
  <li class=" " data-id="Sepia/Sepia/EventType" data-name="sepia::eventtype">
      <a href="../Sepia/EventType.html">EventType</a>
      
    </li>
  
  <li class="parent " data-id="Sepia/Sepia/FileStorage" data-name="sepia::filestorage">
      <a href="../Sepia/FileStorage.html">FileStorage</a>
      
        <ul>
  
  <li class=" " data-id="Sepia/Sepia/FileStorage/WatcherConfig" data-name="sepia::filestorage::watcherconfig">
      <a href="../Sepia/FileStorage/WatcherConfig.html">WatcherConfig</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class=" " data-id="Sepia/Sepia/GenerationInfo" data-name="sepia::generationinfo">
      <a href="../Sepia/GenerationInfo.html">GenerationInfo</a>
      
    </li>
  
  <li class=" " data-id="Sepia/Sepia/InMemoryStorage" data-name="sepia::inmemorystorage">
      <a href="../Sepia/InMemoryStorage.html">InMemoryStorage</a>
      
    </li>
  
  <li class=" " data-id="Sepia/Sepia/LogEvent" data-name="sepia::logevent">
      <a href="../Sepia/LogEvent.html">LogEvent</a>
      
    </li>
  
  <li class=" " data-id="Sepia/Sepia/LogEventType" data-name="sepia::logeventtype">
      <a href="../Sepia/LogEventType.html">LogEventType</a>
      
    </li>
  
  <li class="parent " data-id="Sepia/Sepia/MemoryLimiter" data-name="sepia::memorylimiter">
      <a href="../Sepia/MemoryLimiter.html">MemoryLimiter</a>
      
        <ul>
  
  <li class=" " data-id="Sepia/Sepia/MemoryLimiter/MemoryStats" data-name="sepia::memorylimiter::memorystats">
      <a href="../Sepia/MemoryLimiter/MemoryStats.html">MemoryStats</a>
      
    </li>
  
  <li class=" " data-id="Sepia/Sepia/MemoryLimiter/PressureLevel" data-name="sepia::memorylimiter::pressurelevel">
      <a href="../Sepia/MemoryLimiter/PressureLevel.html">PressureLevel</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class=" " data-id="Sepia/Sepia/Object" data-name="sepia::object">
      <a href="../Sepia/Object.html">Object</a>
      
    </li>
  
  <li class="parent open current" data-id="Sepia/Sepia/PathResolver" data-name="sepia::pathresolver">
      <a href="../Sepia/PathResolver.html">PathResolver</a>
      
        <ul>
  
  <li class=" " data-id="Sepia/Sepia/PathResolver/ObjectInfo" data-name="sepia::pathresolver::objectinfo">
      <a href="../Sepia/PathResolver/ObjectInfo.html">ObjectInfo</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class=" " data-id="Sepia/Sepia/PerFileEventLogger" data-name="sepia::perfileeventlogger">
      <a href="../Sepia/PerFileEventLogger.html">PerFileEventLogger</a>
      
    </li>
  
  <li class=" " data-id="Sepia/Sepia/Serializable" data-name="sepia::serializable">
      <a href="../Sepia/Serializable.html">Serializable</a>
      
    </li>
  
  <li class=" " data-id="Sepia/Sepia/Storage" data-name="sepia::storage">
      <a href="../Sepia/Storage.html">Storage</a>
      
    </li>
  
  <li class=" " data-id="Sepia/Sepia/StorageBackend" data-name="sepia::storagebackend">
      <a href="../Sepia/StorageBackend.html">StorageBackend</a>
      
    </li>
  
  <li class=" " data-id="Sepia/Sepia/Watcher" data-name="sepia::watcher">
      <a href="../Sepia/Watcher.html">Watcher</a>
      
    </li>
  
  <li class="parent " data-id="Sepia/Sepia/WeakCache" data-name="sepia::weakcache(t)">
      <a href="../Sepia/WeakCache.html">WeakCache</a>
      
        <ul>
  
  <li class=" " data-id="Sepia/Sepia/WeakCache/Stats" data-name="sepia::weakcache::stats">
      <a href="../Sepia/WeakCache/Stats.html">Stats</a>
      
    </li>
  
</ul>

      
    </li>
  
</ul>

      
    </li>
  
</ul>

  </div>
</div>


<div class="main-content">
<h1 class="type-name">

  <span class="kind">
    class
  </span> Sepia::<wbr>PathResolver

</h1>


  <ul class="superclass-hierarchy"><li class="superclass"><a href="../Sepia/PathResolver.html">Sepia::PathResolver</a></li><li class="superclass">Reference</li><li class="superclass">Object</li></ul>




  <h2>
    <a id="overview" class="anchor" href="#overview">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>
    Overview
  </h2>

  <p>Utility class for resolving file system paths to Sepia objects</p>
<p>This helper provides methods to convert file system paths back to
Sepia objects, which is particularly useful for file system watchers
and other tools that need to map file paths back to object instances.</p>
<h3><a id="example" class="anchor" href="#example">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Example</h3>
<pre><code class="language-crystal"><span class="c"># Given a file path like &quot;/data/MyDocument/uuid-123&quot;</span>
resolver <span class="o">=</span> <span class="t">Sepia</span><span class="t">::</span><span class="t">PathResolver</span>.new(<span class="s">&quot;/data&quot;</span>)

info <span class="o">=</span> resolver.resolve_path(<span class="s">&quot;/data/MyDocument/uuid-123&quot;</span>)
info.class_name <span class="c"># =&gt; &quot;MyDocument&quot;</span>
info.object_id  <span class="c"># =&gt; &quot;uuid-123&quot;</span>
info.full_path  <span class="c"># =&gt; &quot;/data/MyDocument/uuid-123&quot;</span></code></pre>
















  <h2>
    <a id="defined-in" class="anchor" href="#defined-in">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>
    Defined in:
  </h2>
  
    
      <a href="https://github.com/ralsina/sepia/blob/77fb56b4d6a15b96bba08d01fd7d3dd8a0b4d53b/src/sepia/path_resolver.cr#L19" target="_blank">
        sepia/path_resolver.cr
      </a>
    
    <br/>
  





  
  <h2>
    <a id="constructors" class="anchor" href="#constructors">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>
    Constructors
  </h2>
  <ul class="list-summary">
    
      <li class="entry-summary">
        <a href="#new%28storage_path%3AString%29-class-method" class="signature"><strong>.new</strong>(storage_path : String)</a>
        
          <div class="summary"><p>Creates a new PathResolver</p></div>
        
      </li>
    
  </ul>


  

  

  
  <h2>
    <a id="instance-method-summary" class="anchor" href="#instance-method-summary">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>
    Instance Method Summary
  </h2>
  <ul class="list-summary">
    
      <li class="entry-summary">
        <a href="#list_all_objects%3AArray%28ObjectInfo%29-instance-method" class="signature"><strong>#list_all_objects</strong> : Array(ObjectInfo)</a>
        
          <div class="summary"><p>List all Sepia objects in the storage directory</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#resolve_and_load%28full_path%3AString%2Cklass%3AClass%29%3AObject%7CNil-instance-method" class="signature"><strong>#resolve_and_load</strong>(full_path : String, klass : Class) : Object | Nil</a>
        
          <div class="summary"><p>Resolve a path and load the actual Sepia object</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#resolve_path%28full_path%3AString%29%3AObjectInfo%7CNil-instance-method" class="signature"><strong>#resolve_path</strong>(full_path : String) : ObjectInfo | Nil</a>
        
          <div class="summary"><p>Resolve a file system path to Sepia object information</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#storage_path%3AString-instance-method" class="signature"><strong>#storage_path</strong> : String</a>
        
          <div class="summary"><p>Base storage path for resolving objects</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#storage_path%3D%28storage_path%3AString%29-instance-method" class="signature"><strong>#storage_path=</strong>(storage_path : String)</a>
        
          <div class="summary"><p>Base storage path for resolving objects</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#valid_sepia_path%3F%28path%3AString%29%3ABool-instance-method" class="signature"><strong>#valid_sepia_path?</strong>(path : String) : Bool</a>
        
          <div class="summary"><p>Check if a path is a valid Sepia object path</p></div>
        
      </li>
    
  </ul>



  <div class="methods-inherited">
    
      


      


      


      


    
      


      


      


      


    
  </div>

  
  <h2>
    <a id="constructor-detail" class="anchor" href="#constructor-detail">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>
    Constructor Detail
  </h2>
  
    <div class="entry-detail" id="new(storage_path:String)-class-method">
      <div class="signature">
        
        def self.<strong>new</strong>(storage_path : String)

        <a class="method-permalink" href="#new%28storage_path%3AString%29-class-method">#</a>
      </div>
      
        <div class="doc">
          
          <p>Creates a new PathResolver</p>
<pre><code class="language-crystal">resolver <span class="o">=</span> <span class="t">PathResolver</span>.new(<span class="s">&quot;/data/sepia&quot;</span>)
resolver <span class="o">=</span> <span class="t">PathResolver</span>.new(<span class="t">Sepia</span><span class="t">::</span><span class="t">Storage</span>.instance.path)</code></pre>
        </div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/ralsina/sepia/blob/77fb56b4d6a15b96bba08d01fd7d3dd8a0b4d53b/src/sepia/path_resolver.cr#L71" target="_blank">View source</a>]
        
      </div>
    </div>
  


  

  

  
  <h2>
    <a id="instance-method-detail" class="anchor" href="#instance-method-detail">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>
    Instance Method Detail
  </h2>
  
    <div class="entry-detail" id="list_all_objects:Array(ObjectInfo)-instance-method">
      <div class="signature">
        
        def <strong>list_all_objects</strong> : Array(<a href="../Sepia/PathResolver/ObjectInfo.html">ObjectInfo</a>)

        <a class="method-permalink" href="#list_all_objects%3AArray%28ObjectInfo%29-instance-method">#</a>
      </div>
      
        <div class="doc">
          
          <p>List all Sepia objects in the storage directory</p>
<p>Returns an array of ObjectInfo for all found objects</p>
<pre><code class="language-crystal">resolver <span class="o">=</span> <span class="t">PathResolver</span>.new(<span class="s">&quot;/data&quot;</span>)
objects <span class="o">=</span> resolver.list_all_objects
objects.each <span class="k">do</span> <span class="o">|</span>info<span class="o">|</span>
  puts <span class="s">&quot;</span><span class="i">#{</span>info.class_name<span class="i">}</span><span class="s">: </span><span class="i">#{</span>info.object_id<span class="i">}</span><span class="s">&quot;</span>
<span class="k">end</span></code></pre>
        </div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/ralsina/sepia/blob/77fb56b4d6a15b96bba08d01fd7d3dd8a0b4d53b/src/sepia/path_resolver.cr#L139" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="resolve_and_load(full_path:String,klass:Class):Object|Nil-instance-method">
      <div class="signature">
        
        def <strong>resolve_and_load</strong>(full_path : String, klass : Class) : <a href="../Sepia/Object.html">Object</a> | Nil

        <a class="method-permalink" href="#resolve_and_load%28full_path%3AString%2Cklass%3AClass%29%3AObject%7CNil-instance-method">#</a>
      </div>
      
        <div class="doc">
          
          <p>Resolve a path and load the actual Sepia object</p>
<p>This is a convenience method that combines resolve_path and object loading</p>
<pre><code class="language-crystal">obj <span class="o">=</span> resolver.resolve_and_load(<span class="s">&quot;/data/MyDocument/uuid-123&quot;</span>, <span class="t">TestDocument</span>)
<span class="k">if</span> obj
  puts <span class="s">&quot;Loaded: </span><span class="i">#{</span>obj.<span class="k">class</span>.name<span class="i">}</span><span class="s"> (</span><span class="i">#{</span>obj.sepia_id<span class="i">}</span><span class="s">)&quot;</span>
<span class="k">end</span></code></pre>
        </div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/ralsina/sepia/blob/77fb56b4d6a15b96bba08d01fd7d3dd8a0b4d53b/src/sepia/path_resolver.cr#L121" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="resolve_path(full_path:String):ObjectInfo|Nil-instance-method">
      <div class="signature">
        
        def <strong>resolve_path</strong>(full_path : String) : <a href="../Sepia/PathResolver/ObjectInfo.html">ObjectInfo</a> | Nil

        <a class="method-permalink" href="#resolve_path%28full_path%3AString%29%3AObjectInfo%7CNil-instance-method">#</a>
      </div>
      
        <div class="doc">
          
          <p>Resolve a file system path to Sepia object information</p>
<pre><code class="language-crystal">info <span class="o">=</span> resolver.resolve_path(<span class="s">&quot;/data/MyDocument/uuid-123&quot;</span>)
info.class_name <span class="c"># =&gt; &quot;MyDocument&quot;</span>
info.object_id  <span class="c"># =&gt; &quot;uuid-123&quot;</span></code></pre>
        </div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/ralsina/sepia/blob/77fb56b4d6a15b96bba08d01fd7d3dd8a0b4d53b/src/sepia/path_resolver.cr#L81" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="storage_path:String-instance-method">
      <div class="signature">
        
        def <strong>storage_path</strong> : String

        <a class="method-permalink" href="#storage_path%3AString-instance-method">#</a>
      </div>
      
        <div class="doc">
          
          <p>Base storage path for resolving objects</p>
        </div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/ralsina/sepia/blob/77fb56b4d6a15b96bba08d01fd7d3dd8a0b4d53b/src/sepia/path_resolver.cr#L63" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="storage_path=(storage_path:String)-instance-method">
      <div class="signature">
        
        def <strong>storage_path=</strong>(storage_path : String)

        <a class="method-permalink" href="#storage_path%3D%28storage_path%3AString%29-instance-method">#</a>
      </div>
      
        <div class="doc">
          
          <p>Base storage path for resolving objects</p>
        </div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/ralsina/sepia/blob/77fb56b4d6a15b96bba08d01fd7d3dd8a0b4d53b/src/sepia/path_resolver.cr#L63" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="valid_sepia_path?(path:String):Bool-instance-method">
      <div class="signature">
        
        def <strong>valid_sepia_path?</strong>(path : String) : Bool

        <a class="method-permalink" href="#valid_sepia_path%3F%28path%3AString%29%3ABool-instance-method">#</a>
      </div>
      
        <div class="doc">
          
          <p>Check if a path is a valid Sepia object path</p>
<pre><code class="language-crystal"><span class="k">if</span> resolver.valid_sepia_path?(<span class="s">&quot;/data/MyDocument/uuid-123&quot;</span>)
  puts <span class="s">&quot;This is a valid Sepia object path&quot;</span>
<span class="k">end</span></code></pre>
        </div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/ralsina/sepia/blob/77fb56b4d6a15b96bba08d01fd7d3dd8a0b4d53b/src/sepia/path_resolver.cr#L172" target="_blank">View source</a>]
        
      </div>
    </div>
  



</div>

</body>
</html>
